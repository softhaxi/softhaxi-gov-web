<!-- https://github.com/nhn/tui.calendar -->
<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>[[#{app.name}]] - Agenda</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
        integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link th:href="@{/styles/app.css}" rel="stylesheet" />
    <link th:href="@{/styles/main.css}" rel="stylesheet" />
    <link th:href="@{/styles/tokenfield-typeahead.css}" rel="stylesheet" />
    <link th:href="@{/styles/bootstrap-tokenfield.css}" rel="stylesheet" />
    <link th:href="@{/asset/vendor/dhtmlx/dhtmlxscheduler_material.css?v=5.3.11}" rel="stylesheet" />
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css"
        integrity="sha512-mSYUmp1HYZDFaVKK//63EcZq4iFWFjxSL+Z3T/aCt4IO9Cejm03q3NKKYN6pFQzY0SBOr8h+eCIAZHPXcpZaNw=="
        crossorigin="anonymous" />

</head>

<body>
    <header th:replace="~{fragment/header :: header}">Header</header>
    <div class="container">
        <div class="row pb-2 pt-4">
            <div class="col-md-6">
                <h5 class="align-text-bottom">AGENDA</h5>
            </div>
            <div class="col-md-6 text-end">
                <button class="btn btn-success" style="background-color: #8678D9;" data-bs-toggle="modal"
                    data-bs-target="#new-agenda"><i class="las la-plus"></i>Tambah Agenda</button>
            </div>
            <div class="modal fade" id="new-agenda" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <form class="new-agenda-form" method="POST" th:action="@{/agenda/save}">
                            <div class="modal-header">
                                <span class="modal-title  py-2" id="exampleModalLabel">AGENDA BARU</span>
                            </div>
                            <div class="modal-body">
                                <div class="mb-3 py-2">
                                    <svg width="30" height="30" viewBox="0 0 30 30" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="15" cy="15" r="15" fill="white" fill-opacity="0.5" />
                                        <path
                                            d="M13.5938 26.2505L12.1875 25.7817L10.7812 26.2505V22.0312H13.5938V26.2505Z"
                                            fill="url(#paint0_linear)" />
                                        <path
                                            d="M21.5625 4.21875H14.5312V3.75047C14.5312 3.23297 14.1108 2.8125 13.5938 2.8125H10.7812C10.2642 2.8125 9.84375 3.23297 9.84375 3.75047V4.21875H8.4375C7.14516 4.21875 6.09375 5.27016 6.09375 6.56297V23.4384C6.09375 24.7308 7.14516 25.7812 8.4375 25.7812H9.84375V26.2472C9.84375 26.6053 10.043 26.9273 10.3631 27.0877C10.4967 27.1547 10.6411 27.1875 10.7841 27.1875C10.9833 27.1875 11.1802 27.1233 11.3466 26.9986L12.1875 26.3681L13.028 26.9986C13.3134 27.2128 13.6912 27.247 14.0119 27.0877C14.332 26.9273 14.5312 26.6053 14.5312 26.2472V25.7812H21.5625C22.8548 25.7812 23.9062 24.7308 23.9062 23.4384V6.56297C23.9062 5.27016 22.8548 4.21875 21.5625 4.21875ZM10.7812 3.75H13.5938V4.21875H10.7812V3.75ZM9.84375 22.9688H8.90625V22.0312H9.84375V22.9688ZM12.7495 25.6181C12.4191 25.3702 11.9559 25.3702 11.6255 25.6181L10.7812 26.2472V22.0312H13.5933L13.5905 26.2486L12.7495 25.6181ZM14.5312 22.0312H21.0938V22.9688H14.5312V22.0312ZM22.9688 23.4384C22.9688 24.2133 22.3383 24.8438 21.5625 24.8438H14.5312V23.9062H21.0938C21.6108 23.9062 22.0312 23.4862 22.0312 22.9697V22.0322C22.0312 21.5147 21.6108 21.0938 21.0938 21.0938H8.90625C8.38922 21.0938 7.96875 21.5147 7.96875 22.0322V22.9697C7.96875 23.4862 8.38922 23.9062 8.90625 23.9062H9.84375V24.8438H8.4375C7.66219 24.8438 7.03125 24.2133 7.03125 23.4384V6.56297C7.03125 5.78766 7.66172 5.15625 8.4375 5.15625H9.84375H14.5312H21.5625C22.3378 5.15625 22.9688 5.78719 22.9688 6.56297V23.4384Z"
                                            fill="url(#paint1_linear)" />
                                        <path
                                            d="M12.1875 9.84375H11.2355C10.4681 9.84375 9.84375 10.4681 9.84375 11.2359V14.5312H10.7812V13.5938H12.6562V14.5312H13.5938V11.2359C13.5938 10.4681 12.9628 9.84375 12.1875 9.84375ZM10.7812 12.6562V11.2359C10.7812 10.9852 10.9847 10.7812 11.2355 10.7812H12.1875C12.4416 10.7812 12.6562 10.9894 12.6562 11.2359V12.6562H10.7812Z"
                                            fill="url(#paint2_linear)" />
                                        <path d="M20.1562 9.84375H14.5312V10.7812H20.1562V9.84375Z"
                                            fill="url(#paint3_linear)" />
                                        <path d="M20.1562 11.7188H14.5312V12.6562H20.1562V11.7188Z"
                                            fill="url(#paint4_linear)" />
                                        <path d="M20.1562 13.5938H14.5312V14.5312H20.1562V13.5938Z"
                                            fill="url(#paint5_linear)" />
                                        <path d="M13.5938 15.4688H9.84375V16.4062H13.5938V15.4688Z"
                                            fill="url(#paint6_linear)" />
                                        <path d="M20.1562 15.4688H14.5312V16.4062H20.1562V15.4688Z"
                                            fill="url(#paint7_linear)" />
                                        <path d="M13.5938 3.75H10.7812V4.21875H13.5938V3.75Z"
                                            fill="url(#paint8_linear)" />
                                        <defs>
                                            <linearGradient id="paint0_linear" x1="12.1875" y1="21.9532" x2="12.1875"
                                                y2="26.4205" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#6DC7FF" />
                                                <stop offset="1" stop-color="#E6ABFF" />
                                            </linearGradient>
                                            <linearGradient id="paint1_linear" x1="15" y1="2.46094" x2="15" y2="27.6076"
                                                gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#1A6DFF" />
                                                <stop offset="1" stop-color="#C822FF" />
                                            </linearGradient>
                                            <linearGradient id="paint2_linear" x1="11.7187" y1="2.46098" x2="11.7187"
                                                y2="27.6072" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#1A6DFF" />
                                                <stop offset="1" stop-color="#C822FF" />
                                            </linearGradient>
                                            <linearGradient id="paint3_linear" x1="17.3437" y1="2.46098" x2="17.3437"
                                                y2="27.6072" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#1A6DFF" />
                                                <stop offset="1" stop-color="#C822FF" />
                                            </linearGradient>
                                            <linearGradient id="paint4_linear" x1="17.3437" y1="2.46098" x2="17.3437"
                                                y2="27.6072" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#1A6DFF" />
                                                <stop offset="1" stop-color="#C822FF" />
                                            </linearGradient>
                                            <linearGradient id="paint5_linear" x1="17.3437" y1="2.46098" x2="17.3437"
                                                y2="27.6072" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#1A6DFF" />
                                                <stop offset="1" stop-color="#C822FF" />
                                            </linearGradient>
                                            <linearGradient id="paint6_linear" x1="11.7187" y1="2.46098" x2="11.7187"
                                                y2="27.6072" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#1A6DFF" />
                                                <stop offset="1" stop-color="#C822FF" />
                                            </linearGradient>
                                            <linearGradient id="paint7_linear" x1="17.3437" y1="2.46098" x2="17.3437"
                                                y2="27.6072" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#1A6DFF" />
                                                <stop offset="1" stop-color="#C822FF" />
                                            </linearGradient>
                                            <linearGradient id="paint8_linear" x1="12.1875" y1="3.32034" x2="12.1875"
                                                y2="4.8443" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#6DC7FF" />
                                                <stop offset="1" stop-color="#E6ABFF" />
                                            </linearGradient>
                                        </defs>
                                    </svg>

                                    <label for="judul" class="col-form-label">Judul/Perihal</label>
                                    <input type="text" placeholder="Judul" class="form-control" name="title"
                                        th:value="${title}" autocomplete="off">
                                </div>
                                <div class="mb-3 py-2">
                                    <svg width="30" height="30" viewBox="0 0 30 30" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="15" cy="15" r="15" fill="white" fill-opacity="0.5" />
                                        <path
                                            d="M15 27.5C21.9036 27.5 27.5 21.9036 27.5 15C27.5 8.09644 21.9036 2.5 15 2.5C8.09644 2.5 2.5 8.09644 2.5 15C2.5 21.9036 8.09644 27.5 15 27.5Z"
                                            fill="#00ACC1" />
                                        <path
                                            d="M15 25C20.5228 25 25 20.5228 25 15C25 9.47715 20.5228 5 15 5C9.47715 5 5 9.47715 5 15C5 20.5228 9.47715 25 15 25Z"
                                            fill="#EEEEEE" />
                                        <path d="M15.625 6.875H14.375V15H15.625V6.875Z" fill="black" />
                                        <path
                                            d="M10.0003 17.255L10.6445 18.3262L14.3938 16.0714L13.7495 15.0002L10.0003 17.255Z"
                                            fill="black" />
                                        <path
                                            d="M15 16.25C15.6904 16.25 16.25 15.6904 16.25 15C16.25 14.3096 15.6904 13.75 15 13.75C14.3096 13.75 13.75 14.3096 13.75 15C13.75 15.6904 14.3096 16.25 15 16.25Z"
                                            fill="black" />
                                        <path
                                            d="M15 15.625C15.3452 15.625 15.625 15.3452 15.625 15C15.625 14.6548 15.3452 14.375 15 14.375C14.6548 14.375 14.375 14.6548 14.375 15C14.375 15.3452 14.6548 15.625 15 15.625Z"
                                            fill="#00ACC1" />
                                    </svg>

                                    <label for="start-date" class="col-form-label">Waktu</label><br>
                                    <div class="row">
                                        <div class="col-md-5">
                                            <input id="date-selection" type="text" class="form-control text-center"
                                                name="startDate" data-provide="datepicker" th:value="${startDate}"
                                                autocomplete="off">
                                        </div>
                                        <div class="col-md-2 text-center">s/d</div>
                                        <div class="col-md-5">
                                            <input id="date-selection1" type="text" class="form-control text-center"
                                                name="endDate" data-provide="datepicker" th:value="${endDate}"
                                                autocomplete="off">
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3 py-2">
                                    <div class="row">
                                        <div class="col-md-5">
                                            <input type="time" class="form-control" name="startTime"
                                                th:value="${startTime}">
                                        </div>
                                        <div class="col-md-2 text-center">s/d</div>
                                        <div class="col-md-5">
                                            <input type="time" class="form-control" name="endTime"
                                                th:value="${endTime}">
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <svg width="30" height="30" viewBox="0 0 30 30" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="15" cy="15" r="15" fill="white" fill-opacity="0.5" />
                                        <path d="M16.25 25.625L15 28.75L13.75 25.625V8.75H16.25V25.625Z"
                                            fill="#C5CAE9" />
                                        <path
                                            d="M15 11.25C17.7614 11.25 20 9.01142 20 6.25C20 3.48858 17.7614 1.25 15 1.25C12.2386 1.25 10 3.48858 10 6.25C10 9.01142 12.2386 11.25 15 11.25Z"
                                            fill="#FF5722" />
                                        <path d="M11.875 6.25C11.875 4.52438 13.2738 3.125 15 3.125" stroke="#FFAB91"
                                            stroke-width="2" stroke-linecap="round" />
                                        <ellipse cx="15.0001" cy="27.8567" rx="8.57143" ry="2.14286"
                                            fill="url(#paint0_linear)" />
                                        <defs>
                                            <linearGradient id="paint0_linear" x1="15.0001" y1="25.7139" x2="15.0001"
                                                y2="29.9996" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#0983E7" stop-opacity="0" />
                                                <stop offset="0.0001" stop-color="#0983E7" stop-opacity="0" />
                                                <stop offset="1" stop-color="#0983E7" stop-opacity="0.55" />
                                            </linearGradient>
                                        </defs>
                                    </svg>
                                    <label for="lokasi" class="col-form-label">Lokasi</label><br>
                                    <input type="text" class="form-control" id="lokasi" name="location"
                                        th:value="${location}" autocomplete="off">
                                </div>
                                <div class="mb-3">
                                    <label for="category">Category:</label>

                                    <select name="category" class="form-control" id="category">
                                        <option value="inoffice">INOFFICE</option>
                                        <option value="outoffice">OUTOFFICE</option>
                                        <option value="online">ONLINE</option>
                                    </select>
                                </div>
                                <div class="mb-3 py-2">
                                    <svg width="30" height="30" viewBox="0 0 30 30" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="15" cy="15" r="15" fill="white" fill-opacity="0.5" />
                                        <path
                                            d="M27 21H25.5C25.5 18.105 23.145 15.75 20.25 15.75C18.3435 15.75 16.5855 16.8075 15.6585 18.51L15 19.7205L14.3415 18.51C13.4145 16.8075 11.6565 15.75 9.75 15.75C6.855 15.75 4.5 18.105 4.5 21H3C3 17.2785 6.0285 14.25 9.75 14.25C11.808 14.25 13.731 15.204 15 16.7985C16.269 15.204 18.192 14.25 20.25 14.25C23.9715 14.25 27 17.2785 27 21Z"
                                            fill="#16207C" />
                                        <path
                                            d="M20.25 15C18.183 15 16.5 13.317 16.5 11.25C16.5 9.183 18.183 7.5 20.25 7.5C22.8285 7.5 25.5945 10.4085 25.9005 10.7415L26.37 11.2485L25.9035 11.757C25.599 12.0885 22.8555 15 20.25 15ZM20.25 9C19.0095 9 18 10.0095 18 11.25C18 12.4905 19.0095 13.5 20.25 13.5C21.6075 13.5 23.328 12.156 24.2895 11.2515C23.3205 10.3455 21.5925 9 20.25 9Z"
                                            fill="black" />
                                        <path
                                            d="M9.75 15C7.683 15 6 13.317 6 11.25C6 9.183 7.683 7.5 9.75 7.5C11.817 7.5 13.5 9.183 13.5 11.25C13.5 13.317 11.817 15 9.75 15ZM9.75 9C8.5095 9 7.5 10.0095 7.5 11.25C7.5 12.4905 8.5095 13.5 9.75 13.5C10.9905 13.5 12 12.4905 12 11.25C12 10.0095 10.9905 9 9.75 9Z"
                                            fill="black" />
                                    </svg>

                                    <label for="peserta" class="col-form-label">Tambahan Peserta</label><br>
                                    <input type="text" class="form-control" id="email" name="email" th:value="${email}"
                                        autocomplete="off">
                                    <!-- <input type="text" class="form-control" name="email" id="email" value="red,green,blue" /> -->
                                    <input type="hidden" name="peserta[]">
                                    <div class="dropdown dropdown-email" id="dropdown-email"
                                        style="z-index: 1000; display: none;">
                                        <ul class="list-unstyled" id="list-email" aria-labelledby="dropdownMenuButton2">
                                        </ul>
                                    </div>
                                    <span id="peserta" style="width: inherit"> </span>
                                </div>
                                <div class="mb-3 py-2">
                                    <svg width="30" height="30" viewBox="0 0 30 30" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="15" cy="15" r="15" fill="white" fill-opacity="0.5" />
                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                            d="M22.3875 6H6.8625C6.38333 6 6 6.38333 6 6.8625V22.3875C6 22.7708 6.38333 23.25 6.8625 23.25H22.3875C22.7708 23.25 23.25 22.7708 23.25 22.3875V6.8625C23.25 6.38333 22.7708 6 22.3875 6ZM11.75 9.83339H9.83333V11.7501H11.75V9.83339ZM19.4167 9.83339H13.6667V11.7501H19.4167V9.83339ZM19.4167 13.6667H13.6667V15.5833H19.4167V13.6667ZM13.6667 17.5H19.4167V19.4167H13.6667V17.5ZM9.83333 13.6667H11.75V15.5833H9.83333V13.6667ZM11.75 17.5H9.83333V19.4167H11.75V17.5ZM7.91669 21.3334H21.3334V7.91669H7.91669V21.3334Z"
                                            fill="#0983E7" />
                                    </svg>
                                    <label for="catatan" class="col-form-label">Catatan Tambahan</label><br>
                                    <textarea id="catatan" placeholder="Tambahkan catatan atau link"
                                        style="resize: none;" rows="4" cols="49" name="description"
                                        th:value="${description}"></textarea>
                                </div>
                                <div class="mb-3 py-2">
                                    <svg width="30" height="30" viewBox="0 0 30 30" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="14.5844" cy="15.0004" r="13.2583" fill="white" fill-opacity="0.5" />
                                        <path
                                            d="M13.75 8.75L20.9375 15.9375C22.3188 17.3187 22.3188 19.5562 20.9375 20.9375C19.5563 22.3187 17.3188 22.3188 15.9375 20.9375L8.125 13.125C7.2625 12.2625 7.2625 10.8625 8.125 10C8.9875 9.1375 10.3875 9.1375 11.25 10L17.8125 16.5625C18.1563 16.9062 18.1562 17.4687 17.8125 17.8125C17.4687 18.1562 16.9062 18.1562 16.5625 17.8125L10.625 11.875L9.6875 12.8125L15.625 18.75C16.4875 19.6125 17.8875 19.6125 18.75 18.75C19.6125 17.8875 19.6125 16.4875 18.75 15.625L12.1875 9.0625C10.8063 7.68125 8.56875 7.68125 7.1875 9.0625C5.80625 10.4437 5.80625 12.6812 7.1875 14.0625L15 21.875C16.9 23.775 19.975 23.775 21.875 21.875C23.775 19.975 23.775 16.9 21.875 15L14.6875 7.8125L13.75 8.75Z"
                                            fill="black" />
                                    </svg>

                                    <label for="lampiran" class="col-form-label">Lampiran</label><br>
                                    <input type="file" id="myFile" name="filename">
                                </div>

                            </div>
                            <div class="modal-footer">
                                <input type="submit" class="btn new-agenda-btn" value="Simpan">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mb-3 py-3">
                
                <div class="col-md-3">
                    <div id="cal_here"></div>
                    <form class="search" th:action="@{/agenda}" method="GET">
                        <div class="row">
                            <div class="search-container pt-5">
                                    <input type="text" placeholder="Cari nama pegawai" name="search" autocomplete="off">
                                    <input type="hidden" name="id">
                                    <input type="hidden" name="category">
                                    <button type="submit" class="btn-search"><i class="fa fa-search"></i></button>
                                    
                                <br>
                                <div class="dropdown dropdown-employee" id="dropdown-employee" style="z-index: 1000; display: none;">
                                        <ul class="list-unstyled" id="list-employee" aria-labelledby="dropdownMenuButton2">
                                        </ul>
                                    </div>
                            </div>
                            <div class="agenda-type p-1 py-3">
                                <label class="agenda-container">Semua
                                    <input type="checkbox" class="category" value="ALL">
                                    <span class="semua"></span>
                                </label>
                                <label class="agenda-container">Daring
                                    <input type="checkbox" class="category" value="ONLINE">
                                    <span class="daring"></span>
                                </label>
                                <label class="agenda-container">Di Kantor
                                    <input type="checkbox" class="category" value="INOFFICE">
                                    <span class="kantor"></span>
                                </label>
                                <label class="agenda-container">Perjalanan Dinas
                                    <input type="checkbox" class="category" value="OUTOFFICE">
                                    <span class="dinas"></span>
                                </label>
                            </div>
                        </div>
                </form>
            </div>
            <div class="col-md-9">
                <div id="scheduler_here" class="dhx_cal_container" style='width:100%; height:100vh;'>
                    <div class="dhx_cal_navline">
                        <div class="dhx_cal_prev_button">&nbsp;</div>
                        <div class="dhx_cal_next_button">&nbsp;</div>
                        <div class="dhx_cal_today_button"></div>
                        <div class="dhx_cal_date"></div>
                        <div class="dhx_cal_tab" name="day_tab"></div>
                        <div class="dhx_cal_tab" name="week_tab"></div>
                        <div class="dhx_cal_tab" name="month_tab"></div>
                    </div>
                    <div class="dhx_cal_header"></div>
                    <div class="dhx_cal_data"></div>
                </div>
            </div>
        </div>

        <footer th:insert="~{fragment/footer :: footer}">Footer</footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
        crossorigin="anonymous"></script>
    <script th:src="@{/asset/vendor/dhtmlx/dhtmlxscheduler.js?v=5.3.11}"></script>
    <script th:src="@{/asset/vendor/dhtmlx/ext/dhtmlxscheduler_minical.js?v=5.3.11}"></script>
    <script th:src="@{/asset/vendor/dhtmlx/locale/locale_id.js?v=5.3.11}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"
        integrity="sha512-T/tUfKSV1bihCnd+MxKD0Hm1uBBroVYBOYSk1knyvQ9VyZJpc/ALb4P0r6ubwVPSGB2GvjeoMAJJImBG12TiaQ=="
        crossorigin="anonymous"></script>
    <script type="text/javascript" th:src="@{/scripts/typeahead.bundle.min.js}" charset="UTF-8"></script>
    <script type="text/javascript" th:src="@{/scripts/bootstrap-tokenfield.min.js}" charset="UTF-8"></script>
    <script th:inline="javascript">

        /*<![CDATA[*/
        var message = '[[${invitationObject}]]';
        /*]]>*/
        var json = JSON.parse(message);

        var agenda = [];
        for (var i = 0; i < json.length; i++) {
            var obj = json[i];

            var startTimeString = new Date(obj.startTime);
            var hour = parseInt(startTimeString.getHours()) < 10 ? '0' + startTimeString.getHours() : startTimeString.getHours();
            var minute = parseInt(startTimeString.getMinutes()) < 10 ? '0' + startTimeString.getMinutes() : startTimeString.getMinutes();
            var month = ("0" + (startTimeString.getMonth() + 1)).slice(-2);
            var date = ("0" + startTimeString.getDate()).slice(-2);

            var startTime = startTimeString.getFullYear() + "-" + month + "-" + date + " " + hour + ":" + minute;

            var endTimeString = new Date(obj.endTime);
            var endHour = parseInt(endTimeString.getHours()) < 10 ? '0' + endTimeString.getHours() : endTimeString.getHours();
            var endMinute = parseInt(endTimeString.getMinutes()) < 10 ? '0' + startTimeString.getMinutes() : endTimeString.getMinutes();
            var endMonth = ("0" + (endTimeString.getMonth() + 1)).slice(-2);
            var endDate = ("0" + endTimeString.getDate()).slice(-2);


            var endTime = endTimeString.getFullYear() + "-" + endMonth + "-" + endDate + " " + endHour + ":" + endMinute;

            var member = obj.members;
            var name = '';
            var memberName = [];
            for (var j = 0; j < member.length; j++) {
                memberName.push(member[j].fullName == '' ? member[j].email : member[j].fullName);
            }
            name = memberName.join(",");

            var body = '';
            body = '<span>' + name + '</span><br>'
                + '<span>' + obj.title + '</span><br>'
                + '<span>' + obj.location + '</span><br>'
                + '<span>' + hour + ":" + minute + ' - ' + endHour + ":" + endMinute + '</span><br>'
                + '<a href="' + obj.attachmentUrl + ' "download>' + 'Download Attachment' + '</a>';

            var color = '';
            switch (obj.category) {
                case 'INOFFICE':
                    color = '#4AC8F1';
                    break;
                case 'OUTOFFICE':
                    color = '#FB852F';
                    break
                case 'ONLINE':
                    color = '#EAC600';
                    break
                default:
                    color = '#EAC600';
                    break;
            }
            agenda.push({ id: obj.id, text: body, start_date: startTime, end_date: endTime, color: color });
        }

        (function () {
            scheduler.config.header = [
                "date",
                "prev",
                "today",
                "next"
            ];
            scheduler.config.dblclick_create = false;
            scheduler.config.drag_resize = false;
            scheduler.config.drag_move = false;
            scheduler.config.drag_create = false;
            scheduler.config.icons_select = [];
            scheduler.attachEvent('onDblClick', function (id, e) {
                return false;
            });
            scheduler.attachEvent('onClick', function (id, e) {
                console.log(e);
                console.log(id);
            });

            scheduler.init("scheduler_here", new Date(), "day");
            if (agenda.length > 0) {
                scheduler.parse(agenda, "json");
            }

        })();

        (function () {
            var calendar = scheduler.renderCalendar({
                container: "cal_here",
                navigation: true,
                handler: function (date) {
                    scheduler.setCurrentView(date, scheduler.getState().mode);
                }
            });
            scheduler.linkCalendar(calendar);
            // scheduler.attachEvent("onDblClick", function(id, e){ console.log("doubleClick"); return false; });

            scheduler.setCurrentView();
        }
        )();

        $('#date-selection, #date-selection1').datepicker({
            todayHighlight: true,
            language: 'id',
            autoclose: true,
            todayBtn: "linked",

        });

        $("button.btn-add-peserta").on('click', function (e) {
            e.preventDefault();
            var elem = $(this).parent().find('input[name=peserta\\[\\]]');


        });

        $('#dropdown-email').hide();
        $('#dropdown-email ul').empty();
        $('input[id=email-tokenfield]').keyup(function (e) {
            $('#dropdown-email').hide();
            $('#dropdown-email ul').empty();
            if ($('input[id=email-tokenfield]').val().length >= 1 && $('input[id=email-tokenfield]').val() != "") {
                
                $.ajax({
                    type: "GET",
                    dataType: "json",
                    url: "/agenda/getuserbyemail",
                    data: 'email=' + $('input[id=email-tokenfield]').val(),
                    success: function (data) {
                        var selOpts = "";
                        if (data != null && data.length != 0) {
                            $.each(data, function (k, v) {
                                var value = data[k].email;
                                var text = data[k].email;
                                selOpts += '<li><a href=\'#\' class=\'email-list\' title="' + text + '">' + text + '</a></li>';
                            });
                            $('#dropdown-email ul').append(selOpts);
                            $('#dropdown-email').show();
                        }
                    }
                });
            }
        });

        $('ul#list-email').on("click", "li", function () {
            $('#dropdown-email').hide();
            $('#peserta').append($(this).children('a').attr("title"));
            $('input[name=email]').val('');
        }
        );

        $('input[name=search]').keyup(function (e) {
            $('#dropdown-employee').hide();
            $('#dropdown-employee ul').empty();
            if ($(this).val().length >= 1 && $(this).val() != "") {
                console.log($(this).val);
                $.ajax({
                    type: "GET",
                    dataType: "json",
                    url: "/employee/search",
                    data: 'name=' + $(this).val(),
                    success: function (data) {
                        var selOpts = "";
                        if (data != null && data.length != 0) {
                            $.each(data, function (k, v) {
                                var value = data[k].value;
                                var label = data[k].label;
                                selOpts += '<li><a href=\'#\' class=\'employee-list\' title="' + value + '">' + label + '</a></li>';
                                console.log(data);
                            });
                            $('#dropdown-employee ul').append(selOpts);
                            $('#dropdown-employee').show();
                        }
                    }
                });
            }
        });

        $('ul#list-employee').on("click", "li", function () {
            $('#dropdown-employee').hide();
            $('input[name=id]').val($(this).children('a').attr('title'));
            $('input[name=search]').val($(this).children('a').text());
        });

        var category = '';
        $('.agenda-container > span').click(function() {
            console.log(this.parent().children().find('.category').val());
            if (this.checked) {
                category.push(this.sibling().find('.category').val());
            } else {
                category.slice(this.val());
            }
            console.log("category: "+category);
        });
        /*$('.btn-search').on('click', function (e) {
            var category = [];
            $('.category:checked').each(function(){
                category.push($(this).val());
            });
            console.log();
            e.preventDefault();
            $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: "/search-agenda",
                    data: 'id=' + $('input[name=id]').val()+'&category='+category,
                    success: function (data) {
                        $('#cal_here').replace
                    }
            })
        });*/
    //$('#email').tokenfield();
    </script>
</body>

</html>